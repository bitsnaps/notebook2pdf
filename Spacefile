# Spacefile Docs: https://go.deta.dev/docs/spacefile/v0
v: 0
micros:
  - name: Notebook2PDF
    src: ./
    engine: custom
    commands:
      - DEBIAN_FRONTEND=noninteractive apt-get install software-properties-common -yq
      - add-apt-repository ppa:canonical-chromium-builds/stage
      - apt-get update
      - DEBIAN_FRONTEND=noninteractive apt-get install chromium-browser  -yq
      - DEBIAN_FRONTEND=noninteractive apt-get install -qy unzip
      - curl -fsSL https://deno.land/x/install/install.sh | sh
      - $HOME/.deno/bin/deno compile --unstable --output main --allow-all index.ts
      - chmod +x main
    primary: true
    run: ./main
    dev: deno run --allow-all --unstable index.ts
    presets:
      env:
        - name: DENO_DIR
          description: Deno configuration directory (do not change /tmp)
          default: /tmp/deno_dir
